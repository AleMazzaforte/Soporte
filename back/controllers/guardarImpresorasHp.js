const tonersHP = [
    {
      modelo: "H05A-H80A",
      impresoras: [
        "LaserJet P2035",
        "Deskjet 2050A - J510",
        "LaserJet Pro 400 serie M401",
        "LaserJet Pro 400 MFP M425"
      ]
    },
    {
      modelo: "H12A",
      impresoras: [
        "LaserJet serie 1010",
        "LaserJet 1012",
        "LaserJet 1015",
        "LaserJet Tank 1020 series",
        "LaserJet serie 1022",
        "LaserJet empresarial P3015d"
      ]
    },
    {
      modelo: "H17A",
      impresoras: [
        "LaserJet Pro MFP serie /M130",
        "LaserJet Pro serie M102"
      ]
    },
    {
      modelo: "H26A",
      impresoras: [
        "LaserJet Pro serie M402-M403 n-dn",
        "LaserJet Pro serie M402-M403",
        "LaserJet Pro MFP serie M426-M427"
      ]
    },
    {
      modelo: "H30A",
      impresoras: [
        "LaserJet Pro MFP M227 series",
        "LaserJet Pro serie M203"
      ]
    },
    {
      modelo: "H48A",
      impresoras: [
        "LaserJet Pro M15w",
        "LaserJet Pro MFP M28w"
      ]
    },
    {
      modelo: "H55A",
      impresoras: [
        "LaserJet Enterprise P3015d",
        "LaserJet Enterprise P3015dn",
        "LaserJet Enterprise P3015x",
        "LaserJet Pro MFP serie /M521"
      ]
    },
   
    {
      modelo: "H58A",
      impresoras: [
        "LaserJet Pro serie M404-M406",
        "LaserJet Pro M428dw MFP",
        "LaserJet Pro M428fdw MFP"
      ]
    },
    {
      modelo: "H64A-H90A",
      impresoras: [
        "LaserJet 600 serie M601",
        "LaserJet 600 serie M602",
        "LaserJet 600 serie M603",
        "LaserJet M4555h MFP",
        "LaserJet P4014",
        "LaserJet P4015",
        "LaserJet P4515tn",
        "LaserJet P4515xm",
        "LaserJet P4515x"
      ]
    },
    {
      modelo: "H78A",
      impresoras: [
        "LaserJet Pro serie M1536 MFP",
        "LaserJet Pro M1536dnf MFP"
      ]
    },
    {
      modelo: "H79A",
      impresoras: [
        "LaserJet Pro M12a",
        "LaserJet Pro M12w",
        "LaserJet Pro MFP M26a",
        "LaserJet Pro MFP M26nw"
      ]
    },
    {
      modelo: "H83A",
      impresoras: [
        "LaserJet Pro MFP serie /M125",
        "LaserJet Pro MFP serie /M127",
        "LaserJet Pro MFP M127fw",
        "LaserJet Pro MFP serie /M225",
        "LaserJet Pro serie M201"
      ]
    },
    {
      modelo: "H85A-H35A-H36A",
      impresoras: [
        "LaserJet pro serie P1102w",
        "LaserJet P1005",
        "LaserJet P1006",
        "LaserJet P1505",
        "LaserJet serie M1120",
        "LaserJet Pro serie M1132",
        "LaserJet Pro serie M1212nf",
        "LaserJet M1522n"
      ]
    },
    {
      modelo: "H87A",
      impresoras: [
        "LaserJet Pro serie M501",
        "LaserJet Pro M501dn",
        "LaserJet Enterprise M506n",
        "LaserJet Enterprise M506x",
        "LaserJet Enterprise Flow M527z MPF",
        "LaserJet Enterprise M527f MFP",
        "LaserJet Enterprise M527dn MFP"
      ]
    },
    
    {
      modelo: "H89A",
      impresoras: [
        "LaserJet Enterprise serie M508",
        "LaserJet Enterprise serie M528 MFP"
      ]
    },
    {
      modelo: "H103A",
      impresoras: [
        "Neverstop Laser serie 1000",
        "Neverstop Laser serie 1200"
      ]
    },
    
    {
      modelo: "H105A",
      impresoras: [
        "Laser MFP 135w",
        "Laser MFP 137fnw",
        "Laser 107w"
      ]
    },
    
    {
      modelo: "H136A",
      impresoras: [
        "LaserJet M212",
        "LaserJet M236 MFP"
      ]
    },
    {
      modelo: "H310A-H350A N",
      impresoras: [
        "LaserJet Pro CP1025nw en Color",
        "LaserJet Pro 100 Color MFP M175",
        "LaserJet Pro MFP serie M176",
        "LaserJet Pro MFP serie M177"
      ]
    },
    {
      modelo: "H311A-H351A C",
      impresoras: [
        "LaserJet Pro CP1025nw en Color",
        "LaserJet Pro 100 Color MFP M176",
        "LaserJet Pro MFP serie M176",
        "LaserJet Pro MFP serie M177"
      ]
    },
    {
      modelo: "H312A-H352A A",
      impresoras: [
        "LaserJet Pro CP1025nw en Color",
        "LaserJet Pro 100 Color MFP M177",
        "LaserJet Pro MFP serie M176",
        "LaserJet Pro MFP serie M177"
      ]
    },
    {
      modelo: "H313A-H353A M",
      impresoras: [
        "LaserJet Pro CP1025nw en Color",
        "LaserJet Pro 100 Color MFP M178",
        "LaserJet Pro MFP serie M176",
        "LaserJet Pro MFP serie M177"
      ]
    },
    {
      modelo: "H320A-H540A N",
      impresoras: [
        "LaserJet Pro serie CM1415 Color MFP",
        "LaserJet Pro Color serie CP1525",
        "LaserJet CM1312 Color MFP",
        "LaserJet serie CP1210 Color",
        "LaserJet CP1518n Color",
        "LaserJet CP1215 Color",
        "LaserJet CP1515n"
      ]
    },
    {
      modelo: "H321A-H541A C",
      impresoras: [
        "LaserJet Pro serie CM1415 Color MFP",
        "LaserJet Pro Color serie CP1526",
        "LaserJet CM1312 Color MFP",
        "LaserJet serie CP1210 Color",
        "LaserJet CP1518ni Color",
        "LaserJet CP1215 Color",
        "LaserJet CP1515n"
      ]
    },
    {
      modelo: "H322A-H542A A",
      impresoras: [
        "LaserJet Pro serie CM1415 Color MFP",
        "LaserJet Pro Color serie CP1527",
        "LaserJet CM1312 Color MFP",
        "LaserJet serie CP1210 Color",
        "LaserJet CP1518ni Color",
        "LaserJet CP1215 Color",
        "LaserJet CP1515n"
      ]
    },
    {
      modelo: "H323A-H543A M",
      impresoras: [
        "LaserJet Pro serie CM1415 Color MFP",
        "LaserJet Pro Color serie CP1528",
        "LaserJet CM1312 Color MFP",
        "LaserJet serie CP1210 Color",
        "LaserJet CP1518ni Color",
        "LaserJet CP1215 Color",
        "LaserJet CP1515n"
      ]
    },
    {
      modelo: "HCE410A N",
      impresoras: [
        "LaserJet Pro 300 M351a Color",
        "LaserJet Pro 300 MFP M375nw Color",
        "LaserJet Pro 400 M451nw Color",
        "LaserJet Pro 400 M451dn Color",
        "LaserJet Pro 400 M451dw Color",
        "LaserJet Pro 400 MFP M475dw Color",
        "LaserJet Pro 400 MFP M475dn Color"
      ]
    },
    {
      modelo: "HCE411A C",
      impresoras: [
        "LaserJet Pro 300 M351a Color",
        "LaserJet Pro 300 MFP M375nw Color",
        "LaserJet Pro 400 M451nw Color",
        "LaserJet Pro 400 M451dn Color",
        "LaserJet Pro 400 M451dw Color",
        "LaserJet Pro 400 MFP M475dw Color",
        "LaserJet Pro 400 MFP M475dn Color"
      ]
    },
    {
      modelo: "HCE412A A",
      impresoras: [
        "LaserJet Pro 300 M351a Color",
        "LaserJet Pro 300 MFP M375nw Color",
        "LaserJet Pro 400 M451nw Color",
        "LaserJet Pro 400 M451dn Color",
        "LaserJet Pro 400 M451dw Color",
        "LaserJet Pro 400 MFP M475dw Color",
        "LaserJet Pro 400 MFP M475dn Color"
      ]
    },
    {
      modelo: "HCE413A M",
      impresoras: [
        "LaserJet Pro 300 M351a Color",
        "LaserJet Pro 300 MFP M375nw Color",
        "LaserJet Pro 400 M451nw Color",
        "LaserJet Pro 400 M451dn Color",
        "LaserJet Pro 400 M451dw Color",
        "LaserJet Pro 400 MFP M475dw Color",
        "LaserJet Pro 400 MFP M475dn Color"
      ]
    }
  ];

  //const conn = require('./tuArchivoDeConexion.js'); // Ajusta la ruta según donde esté tu conexión
import conn from '../db/db.js'
async function guardarImpresorasHp() {
  let connection;
  try {
      connection = await conn.getConnection();
      console.log('Conexión a la base de datos establecida');

      // Iterar sobre cada modelo de toner
      for (const toner of tonersHP) {
          // Buscar el id del toner en la tabla tonersHp
          const [tonerRows] = await connection.query(
              'SELECT id FROM tonersHp WHERE nombre = ?', 
              [toner.modelo]
          );

          if (tonerRows.length === 0) {
              console.log(`No se encontró el toner ${toner.modelo} en la base de datos`);
              continue;
          }

          const idToner = tonerRows[0].id;

          // Insertar cada impresora asociada a este toner
          for (const impresora of toner.impresoras) {
              try {
                  await connection.query(
                      'INSERT INTO impresorasHpToner (nombre, idToner) VALUES (?, ?)',
                      [impresora, idToner]
                  );
                  console.log(`Insertada impresora: ${impresora} con toner ID: ${idToner}`);
              } catch (error) {
                  if (error.code === 'ER_DUP_ENTRY') {
                      console.log(`La impresora ${impresora} ya existe en la base de datos`);
                  } else {
                      console.error(`Error al insertar ${impresora}:`, error);
                  }
              }
          }
      }

      console.log('Proceso completado exitosamente');
  } catch (error) {
      console.error('Error en el proceso:', error);
  } finally {
      if (connection) {
          connection.release(); // Liberar la conexión al pool
          console.log('Conexión liberada');
      }
  }
}

guardarImpresorasHp();